<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core">

    <p:panel id="workerPanel" styleClass="card card-w-title" rendered="#{shelterBean.showWorkerCreateOrEdit}">

        <p:fieldset styleClass="block"
                    legend="Barınak Çalışanları">

                <p:dataTable id="shelterWorkerDataTable" var="worker"
                             styleClass="dataTableStandart"
                             value="#{shelterBean.workers}" rowKey="#{worker.id}"
                             widgetVar="shelterWorkerDataTableWidgetVar" draggableColumns="true" reflow="true"
                             paginator="true"
                             paginatorPosition="bottom"
                             lazy="true"
                             emptyMessage="Eklenebilecek bir çalışan bulunamadı!"
                             filteredValue="#{shelterBean.filteredWorkers}"
                             selection="#{shelterBean.selectedWorkers}">
                    <p:ajax event="rowSelect" update="dataTableHeaderBtn"/>
                    <p:ajax event="rowUnselect" update="dataTableHeaderBtn"/>
                    <p:ajax event="rowSelectCheckbox" update="dataTableHeaderBtn"/>
                    <p:ajax event="rowUnselectCheckbox" update="dataTableHeaderBtn"/>
                    <p:ajax event="toggleSelect" update="dataTableHeaderBtn"/>

                    <f:facet name="header">Çalışan Listesi

                        <p:outputPanel id="dataTableHeaderBtn"
                                       styleClass="dataTableHeaderBtnContainer">

                            <hr style="clear: both;"/>

                            <p:commandButton
                                    value="Ekle"
                                    styleClass="dataTableHeaderBtn" update=":form:workerPanel"
                                    resetValues="true"
                                    process="@this"
                                    icon="fa fa-plus">
                                <f:actionListener
                                        binding="#{shelterBean.addWorker()}"/>
                            </p:commandButton>
                        </p:outputPanel>
                    </f:facet>

                    <p:column selectionMode="multiple"
                              style="width:16px;text-align:center" toggleable="false" exportable="false"/>
                    <p:column headerText="Kullanıcı Id" sortBy="#{worker.id}"
                              filterBy="#{worker.id}" filterMatchMode="contains">
                        <h:outputText value="#{worker.id}"/>
                    </p:column>
                    <p:column headerText="İsim" sortBy="#{worker.name}"
                              filterBy="#{worker.name}" filterMatchMode="contains">
                        <h:outputText value="#{worker.name} #{worker.surname}"/>
                    </p:column>
                    <p:column headerText="Telefon" sortBy="#{worker.phoneNumber}"
                              filterBy="#{worker.phoneNumber}" filterMatchMode="contains">
                        <h:outputText value="#{worker.phoneNumber}"/>
                    </p:column>
                    <p:column headerText="Kullanıcı adı" sortBy="#{worker.userName}"
                              filterBy="#{worker.userName}" filterMatchMode="contains">
                        <h:outputText value="#{worker.userName}"/>
                    </p:column>
                </p:dataTable>


            <p:panelGrid columns="1" layout="grid" styleClass="ui-g-12 ui-md-12 ui-panelgrid-blank form-group">

                <p:dataTable id="shelterWorkerEklenmisDataTable" var="workerAdded"
                             styleClass="dataTableStandart"
                             value="#{shelterBean.addedWorkers}" rowKey="#{workerAdded.id}"
                             widgetVar="shelterWorkerDataTableWidgetVar" draggableColumns="true" reflow="true"
                             paginator="true"
                             paginatorPosition="bottom"
                             lazy="true"
                             emptyMessage="Eklemiş bir çalışan bulunamadı!"
                             filteredValue="#{shelterBean.filteredAddedWorkers}"
                             selection="#{shelterBean.selectedAddedWorkers}">
                    <p:ajax event="rowSelect" update="dataTableHeaderBtn2"/>
                    <p:ajax event="rowUnselect" update="dataTableHeaderBtn2"/>
                    <p:ajax event="rowSelectCheckbox" update="dataTableHeaderBtn2"/>
                    <p:ajax event="rowUnselectCheckbox" update="dataTableHeaderBtn2"/>
                    <p:ajax event="toggleSelect" update="dataTableHeaderBtn2"/>

                    <f:facet name="header">Eklenmiş Çalışan Listesi

                        <p:outputPanel id="dataTableHeaderBtn2"
                                       styleClass="dataTableHeaderBtnContainer">

                            <hr style="clear: both;"/>

                            <p:commandButton
                                    value="Çıkar"
                                    styleClass="dataTableHeaderBtn" update=":form:workerPanel"
                                    resetValues="true"
                                    process="@this"
                                    disabled="#{empty shelterBean.selectedAddedWorkers}"
                                    icon="fa fa-plus">
                                <f:actionListener
                                        binding="#{shelterBean.deleteWorker()}"/>
                            </p:commandButton>
                        </p:outputPanel>
                    </f:facet>

                    <p:column selectionMode="multiple"
                              style="width:16px;text-align:center" toggleable="false" exportable="false"/>
                    <p:column headerText="Kullanıcı Id" sortBy="#{workerAdded.id}"
                              filterBy="#{workerAdded.id}" filterMatchMode="contains">
                        <h:outputText value="#{workerAdded.id}"/>
                    </p:column>
                    <p:column headerText="İsim" sortBy="#{workerAdded.name}"
                              filterBy="#{workerAdded.name}" filterMatchMode="contains">
                        <h:outputText value="#{workerAdded.name} #{workerAdded.surname}"/>
                    </p:column>
                    <p:column headerText="Telefon" sortBy="#{workerAdded.phoneNumber}"
                              filterBy="#{workerAdded.phoneNumber}" filterMatchMode="contains">
                        <h:outputText value="#{workerAdded.phoneNumber}"/>
                    </p:column>
                    <p:column headerText="Kullanıcı adı" sortBy="#{workerAdded.userName}"
                              filterBy="#{workerAdded.userName}" filterMatchMode="contains">
                        <h:outputText value="#{workerAdded.userName}"/>
                    </p:column>
                </p:dataTable>

            </p:panelGrid>

        </p:fieldset>

        <h:panelGrid columns="4" border="0">

            <p:commandButton
                    value="İptal et" update=":form" icon="fa fa-remove" resetValues="true" immediate="true">
                <f:actionListener
                        binding="#{shelterBean.ilkEkraniHazirla()}"/>
            </p:commandButton>
        </h:panelGrid>

    </p:panel>
</ui:composition>